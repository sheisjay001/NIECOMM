<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIECOMM - Gadget Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body data-theme="light">
    <!-- Navigation Placeholder -->
    <div id="nav-placeholder"></div>

    <!-- Premium Hero Section -->
    <section class="hero-premium">
        <div class="hero-glow" style="top: -100px; left: -100px;"></div>
        <div class="hero-glow" style="bottom: -100px; right: -100px; background: radial-gradient(circle, rgba(41, 151, 255, 0.2) 0%, rgba(0,0,0,0) 70%);"></div>
        
        <div class="container hero-content">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    <span class="badge bg-white text-dark mb-4 px-3 py-2 rounded-pill fw-bold text-uppercase tracking-wide shadow-sm fade-up">
                        <i class="fas fa-crown text-warning me-2"></i>Premier Marketplace
                    </span>
                    <h1 class="display-1 fw-bold mb-4 fade-up delay-100" style="letter-spacing: -2px; line-height: 1.1;">
                        Order Today.<br>
                        <span class="text-gradient">GET TODAY.</span>
                    </h1>
                    <p class="lead mb-5 opacity-75 fs-4 fade-up delay-200" style="max-width: 600px; font-weight: 300;">
                        The safest way to buy gadgets in your state. 
                        Fast delivery, easy returns, and verified vendors.
                    </p>
                    <div class="d-flex gap-3 fade-up delay-300">
                        <a href="register.html" class="btn-premium-primary">
                            Start Shopping <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                        <a href="register.html?role=vendor" class="btn-premium-outline text-white border-white">
                            Sell Gadgets
                        </a>
                    </div>
                </div>
                <div class="col-lg-5 fade-up delay-300 mt-5 mt-lg-0">
                    <!-- Glassmorphism Card -->
                    <div class="bg-glass-dark p-4 p-lg-5 rounded-5 position-relative">
                        <div class="d-flex align-items-center justify-content-between mb-4">
                            <h3 class="text-white m-0">Find Your Gadget</h3>
                            <i class="fas fa-search text-secondary fa-lg"></i>
                        </div>
                        <form action="products.html" method="get" class="position-relative">
                            <div class="input-group mb-3">
                                <input type="text" name="search" id="global-search-input" class="form-control form-control-lg bg-dark text-white border-secondary" placeholder="Search iPhone 15, MacBook..." style="border-radius: 12px;" oninput="handleSearchInput(this.value)" autocomplete="off">
                            </div>
                            <div id="search-suggestions" class="position-absolute w-100 bg-white shadow-lg rounded-3 overflow-hidden" style="display: none; top: 60px; left: 0; z-index: 1000; border: 1px solid #eee;"></div>
                            <div class="d-flex gap-2 mb-4 badge-container">
                                <span class="badge bg-dark border border-secondary text-secondary p-2 rounded-pill fw-normal">iPhone 15</span>
                                <span class="badge bg-dark border border-secondary text-secondary p-2 rounded-pill fw-normal">Samsung S24</span>
                                <span class="badge bg-dark border border-secondary text-secondary p-2 rounded-pill fw-normal">MacBook</span>
                            </div>
                            <button class="btn btn-light w-100 py-3 rounded-pill fw-bold">Search Market</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Why NIECOMM Section -->
    <section class="py-5 bg-light">
        <div class="container py-5">
            <div class="text-center mb-5 fade-up">
                <h2 class="display-4 fw-bold mb-3">Why NIECOMM?</h2>
                <p class="lead text-muted">Local. Verified. Secure.</p>
            </div>
            
            <div class="row g-4 text-center">
                <!-- Transparent Returns -->
                <div class="col-lg-4 fade-up delay-100">
                    <div class="h-100 p-4 p-xl-5 bg-white rounded-5 shadow-sm hover-lift transition-all position-relative overflow-hidden">
                        <div class="icon-circle bg-primary-subtle text-primary mb-4 mx-auto" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <i class="fas fa-rotate-left fa-2x"></i>
                        </div>
                        <h3 class="fw-bold mb-3">Transparent Returns</h3>
                        <p class="text-muted mb-4">Returns shouldn't be a hassle. Enjoy clear windows, in-store drop-offs, and local pickups.</p>
                        <span class="badge bg-success-subtle text-success rounded-pill px-3 py-2 fw-bold">
                            <i class="fas fa-check-circle me-1"></i> No Hidden Terms
                        </span>
                    </div>
                </div>

                <!-- Verified Vendors -->
                <div class="col-lg-4 fade-up delay-200">
                    <div class="h-100 p-4 p-xl-5 bg-white rounded-5 shadow-sm hover-lift transition-all position-relative overflow-hidden">
                        <div class="icon-circle bg-success-subtle text-success mb-4 mx-auto" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <i class="fas fa-store-shield fa-2x"></i>
                        </div>
                        <h3 class="fw-bold mb-3">Verified Vendors</h3>
                        <p class="text-muted mb-0">We verify physical shops and CAC registration. No faceless sellers.</p>
                    </div>
                </div>

                <!-- Location-First Shopping -->
                <div class="col-lg-4 fade-up delay-300">
                    <div class="h-100 p-4 p-xl-5 bg-white rounded-5 shadow-sm hover-lift transition-all position-relative overflow-hidden">
                        <div class="icon-circle bg-warning-subtle text-warning mb-4 mx-auto" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <i class="fas fa-map-location-dot fa-2x"></i>
                        </div>
                        <h3 class="fw-bold mb-3">Location-First Shopping</h3>
                        <p class="text-muted mb-0">See products nearby. Save money on delivery. Get it today.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Clean Categories -->
    <section class="py-5 bg-white">
        <div class="container">
            <div class="d-flex justify-content-between align-items-end mb-5">
                <div>
                    <h2 class="fw-bold display-6">Explore Categories</h2>
                    <p class="text-muted m-0">Find exactly what you need.</p>
                </div>
                <a href="products.html" class="btn-premium-outline btn-sm">View All</a>
            </div>
            
            <div class="row g-3" id="categories-container">
                <!-- Skeletons -->
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="category-card text-center p-4 rounded-4 bg-light h-100">
                        <div class="skeleton skeleton-img rounded-circle mx-auto mb-3" style="width: 60px; height: 60px;"></div>
                        <div class="skeleton skeleton-text mx-auto" style="width: 60%;"></div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="category-card text-center p-4 rounded-4 bg-light h-100">
                        <div class="skeleton skeleton-img rounded-circle mx-auto mb-3" style="width: 60px; height: 60px;"></div>
                        <div class="skeleton skeleton-text mx-auto" style="width: 60%;"></div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="category-card text-center p-4 rounded-4 bg-light h-100">
                        <div class="skeleton skeleton-img rounded-circle mx-auto mb-3" style="width: 60px; height: 60px;"></div>
                        <div class="skeleton skeleton-text mx-auto" style="width: 60%;"></div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="category-card text-center p-4 rounded-4 bg-light h-100">
                        <div class="skeleton skeleton-img rounded-circle mx-auto mb-3" style="width: 60px; height: 60px;"></div>
                        <div class="skeleton skeleton-text mx-auto" style="width: 60%;"></div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="category-card text-center p-4 rounded-4 bg-light h-100">
                        <div class="skeleton skeleton-img rounded-circle mx-auto mb-3" style="width: 60px; height: 60px;"></div>
                        <div class="skeleton skeleton-text mx-auto" style="width: 60%;"></div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="category-card text-center p-4 rounded-4 bg-light h-100">
                        <div class="skeleton skeleton-img rounded-circle mx-auto mb-3" style="width: 60px; height: 60px;"></div>
                        <div class="skeleton skeleton-text mx-auto" style="width: 60%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Grid -->
    <section class="py-5 bg-body">
        <div class="container py-5">
            <div class="text-center mb-5">
                <span class="text-primary fw-bold text-uppercase tracking-wide small">Fresh Arrivals</span>
                <h2 class="display-5 fw-bold mt-2">Trending Now</h2>
            </div>
            
            <div class="row g-4" id="featured-products">
                <!-- Skeletons -->
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="product-card-premium">
                        <div class="product-image-container" style="height: 200px; background-color: #eee;">
                            <div class="skeleton skeleton-img w-100 h-100"></div>
                        </div>
                        <div class="p-3 p-md-4">
                            <div class="skeleton skeleton-text mb-2" style="width: 80%;"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 40%;"></div>
                            <div class="skeleton skeleton-text" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="product-card-premium">
                        <div class="product-image-container" style="height: 200px; background-color: #eee;">
                            <div class="skeleton skeleton-img w-100 h-100"></div>
                        </div>
                        <div class="p-3 p-md-4">
                            <div class="skeleton skeleton-text mb-2" style="width: 80%;"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 40%;"></div>
                            <div class="skeleton skeleton-text" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="product-card-premium">
                        <div class="product-image-container" style="height: 200px; background-color: #eee;">
                            <div class="skeleton skeleton-img w-100 h-100"></div>
                        </div>
                        <div class="p-3 p-md-4">
                            <div class="skeleton skeleton-text mb-2" style="width: 80%;"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 40%;"></div>
                            <div class="skeleton skeleton-text" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="product-card-premium">
                        <div class="product-image-container" style="height: 200px; background-color: #eee;">
                            <div class="skeleton skeleton-img w-100 h-100"></div>
                        </div>
                        <div class="p-3 p-md-4">
                            <div class="skeleton skeleton-text mb-2" style="width: 80%;"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 40%;"></div>
                            <div class="skeleton skeleton-text" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5">
                <a href="products.html" class="btn-premium">Browse All Products</a>
            </div>
        </div>
    </section>

    <!-- Minimal Footer -->
    <footer class="bg-white pt-5 pb-5 border-top">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-4">
                    <h4 class="fw-bold mb-4">NIECOMM</h4>
                    <p class="text-muted">The premium marketplace for verified gadgets. Secure, fast, and reliable.</p>
                    <div class="d-flex gap-3 mt-4">
                        <a href="#" class="text-dark"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-dark"><i class="fab fa-instagram fa-lg"></i></a>
                        <a href="#" class="text-dark"><i class="fab fa-linkedin fa-lg"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-6">
                    <h6 class="fw-bold mb-3 text-uppercase small text-muted">Platform</h6>
                    <ul class="list-unstyled d-flex flex-column gap-2">
                        <li><a href="products.html" class="text-decoration-none text-dark">Browse</a></li>
                        <li><a href="register.html?role=vendor" class="text-decoration-none text-dark">Sell</a></li>
                        <li><a href="login.html" class="text-decoration-none text-dark">Login</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-6">
                    <h6 class="fw-bold mb-3 text-uppercase small text-muted">Support</h6>
                    <ul class="list-unstyled d-flex flex-column gap-2">
                        <li><a href="help_center.html" class="text-decoration-none text-dark">Help Center</a></li>
                        <li><a href="safety.html" class="text-decoration-none text-dark">Safety</a></li>
                        <li><a href="terms.html" class="text-decoration-none text-dark">Terms of Service</a></li>
                        <li><a href="privacy.html" class="text-decoration-none text-dark">Privacy Policy</a></li>
                        <li><a href="return_policy.html" class="text-decoration-none text-dark">Return Policy</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h6 class="fw-bold mb-3 text-uppercase small text-muted">Stay Updated</h6>
                    <div class="input-group">
                        <input type="email" class="form-control border-0 bg-light" placeholder="Email address" style="padding: 15px;">
                        <button class="btn btn-dark px-4">Join</button>
                    </div>
                </div>
            </div>
            <div class="row mt-5 pt-4 border-top">
                <div class="col-md-6 text-muted small">
                    &copy; 2026 NIECOMM Inc. All rights reserved.
                </div>
                <div class="col-md-6 text-end small">
                    <span class="text-muted">Designed for Excellence.</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadNav();
            fetchCategories();
            fetchFeaturedProducts();
        });

        async function fetchCategories() {
            try {
                const res = await fetch('/api/categories');
                const categories = await res.json();
                const container = document.getElementById('categories-container');
                
                if (categories.length === 0) {
                    container.innerHTML = '<p class="text-center text-muted">No categories found.</p>';
                    return;
                }

                container.innerHTML = categories.map((cat, index) => {
                    const iconHtml = cat.icon && cat.icon.startsWith('fa-') 
                        ? `<i class="fas ${cat.icon} fa-lg text-primary"></i>`
                        : `<img src="${cat.icon || 'img/icons/default.png'}" alt="" style="width: 30px; height: 30px; object-fit: contain;">`;

                    return `
                    <div class="col-6 col-md-4 col-lg-2 fade-up" style="animation-delay: ${index * 0.1}s">
                        <div class="category-card text-center p-4 rounded-4 bg-light h-100 transition-all">
                            <div class="icon-box mb-3 mx-auto bg-white rounded-circle d-flex align-items-center justify-content-center shadow-sm" style="width: 60px; height: 60px;">
                                ${iconHtml}
                            </div>
                            <h6 class="fw-bold m-0 text-dark small">${cat.name}</h6>
                        </div>
                    </div>
                `}).join('');
            } catch (err) {
                console.error('Error fetching categories:', err);
            }
        }

        async function fetchFeaturedProducts() {
            try {
                const res = await fetch('/api/products');
                const products = await res.json();
                const container = document.getElementById('featured-products');
                
                // Show top 4 products for cleaner look
                const featured = products.slice(0, 4);
                
                if (featured.length === 0) {
                    container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">No products listed yet.</p></div>';
                    return;
                }

                container.innerHTML = featured.map((p, index) => `
                    <div class="col-6 col-md-4 col-lg-3 fade-up" style="animation-delay: ${index * 0.1}s">
                        <div class="product-card-premium">
                            <div class="product-image-container" style="cursor: pointer;" onclick="trackProductClick(${p.vendor_id}, ${p.id}); window.location.href='product_details.html?id=${p.id}'">
                                <img src="${p.image || 'https://via.placeholder.com/300'}" alt="${p.name}">
                                <span class="badge bg-white text-dark position-absolute top-0 start-0 m-3 shadow-sm fw-bold">New</span>
                            </div>
                            <div class="p-3 p-md-4">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <h5 class="fw-bold text-dark mb-0 text-truncate small-md" style="max-width: 70%; cursor: pointer;" onclick="trackProductClick(${p.vendor_id}, ${p.id}); window.location.href='product_details.html?id=${p.id}'">${p.name}</h5>
                                    <h5 class="text-primary fw-bold mb-0 small-md">â‚¦${parseFloat(p.price).toLocaleString()}</h5>
                                </div>
                                <p class="text-muted small mb-3 text-truncate d-none d-md-block">${p.description || 'Premium quality gadget verified by NIECOMM.'}</p>
                                <button class="btn btn-dark w-100 rounded-pill py-2 fw-bold" onclick='addToCart(${JSON.stringify(p).replace(/'/g, "&#39;")})'>
                                    Add <span class="d-none d-md-inline">to Cart</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                console.error('Error fetching products:', err);
            }
        }
    </script>
</body>
</html>